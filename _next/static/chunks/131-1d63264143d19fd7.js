"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[131],{508:function(t,r,e){e.d(r,{DynamicLogo:function(){return l},T:function(){return i}});var o=e(7437),a=e(2265),n=e(7999),c=e(8598),s=e(8017);function u(t){let{children:r,defer:e=!1,fallback:n=null}=t,[c,u]=a.useState(!1);return(0,s.Z)(()=>{e||u(!0)},[e]),a.useEffect(()=>{e&&u(!0)},[e]),(0,o.jsx)(a.Fragment,{children:c?r:n})}function i(t){let r,{color:e="dark",emblem:a,height:c=60,width:s=60}=t;return r=a?"light"===e?"/assets/logo-emblem.svg":"/assets/logo-emblem--dark.svg":"light"===e?"/assets/logo.svg":"/assets/logo--dark.svg",(0,o.jsx)(n.Z,{alt:"logo",component:"img",height:c,src:r,width:s})}function l(t){let{colorDark:r="light",colorLight:e="dark",height:a=60,width:s=60,...l}=t,{colorScheme:h}=(0,c.tv)();return(0,o.jsx)(u,{fallback:(0,o.jsx)(n.Z,{sx:{height:"".concat(a,"px"),width:"".concat(s,"px")}}),children:(0,o.jsx)(i,{color:"dark"===h?r:e,height:a,width:s,...l})})}},3141:function(t,r,e){let o;e.d(r,{v:function(){return l}});var a,n,c,s=e(357),u=e(8473),i=e(357);let l={site:{name:"Krona События",description:"",themeColor:"#090a0b",url:o=(o=(o=null!==(n=null!==(a=s.env.NEXT_PUBLIC_SITE_URL)&&void 0!==a?a:s.env.NEXT_PUBLIC_VERCEL_URL)&&void 0!==n?n:"http://localhost:3000/").includes("http")?o:"https://".concat(o)).endsWith("/")?o:"".concat(o,"/")},logLevel:null!==(c=i.env.NEXT_PUBLIC_LOG_LEVEL)&&void 0!==c?c:u.in.ALL}},2298:function(t,r,e){e.d(r,{S:function(){return s},UserProvider:function(){return u}});var o=e(7437),a=e(2265),n=e(3814),c=e(4382);let s=a.createContext(void 0);function u(t){let{children:r}=t,[e,u]=a.useState({user:null,error:null,isLoading:!0}),i=a.useCallback(async()=>{try{let{data:t,error:r}=await n.U.getUser();if(r){c.k.error(r),u(t=>({...t,user:null,error:"Something went wrong",isLoading:!1}));return}u(r=>({...r,user:null!=t?t:null,error:null,isLoading:!1}))}catch(t){c.k.error(t),u(t=>({...t,user:null,error:"Something went wrong",isLoading:!1}))}},[]);return a.useEffect(()=>{i().catch(t=>{c.k.error(t)})},[]),(0,o.jsx)(s.Provider,{value:{...e,checkSession:i},children:r})}s.Consumer},8692:function(t,r,e){e.d(r,{a:function(){return n}});var o=e(2265),a=e(2298);function n(){let t=o.useContext(a.S);if(!t)throw Error("useUser must be used within a UserProvider");return t}},3814:function(t,r,e){e.d(r,{U:function(){return s}});var o=e(8472);let a=o.Z.create({baseURL:"http://37.194.168.90:2100"}),n=o.Z.create({baseURL:"http://37.194.168.90:2000"});a.interceptors.request.use(t=>(console.log("Starting Request: ",t),t));class c{async signUp(t){let{email:r,password:e,firstName:n,lastName:c}=t;try{return await a.post("auth/signup",{email:r,password:e,firstName:n,lastName:c,headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{}}catch(t){if(o.Z.isAxiosError(t)){var s;return{error:(null===(s=t.response)||void 0===s?void 0:s.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async signInWithOAuth(t){return{error:"Social authentication not implemented"}}async signInWithPassword(t){let{email:r,password:e}=t;try{let t=await a.post("auth/signin",{email:r,password:e,headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:o}=t.data,{token_name:n}=t.data;return console.log(n,o),o&&n&&localStorage.setItem(n,o),{}}catch(t){if(o.Z.isAxiosError(t)){var n;return{error:(null===(n=t.response)||void 0===n?void 0:n.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async resetPassword(t){return{error:"Password reset not implemented"}}async updatePassword(t){return{error:"Update reset not implemented"}}async getUser(){try{let t=localStorage.getItem("custom-auth-token");console.log("token = "+t);let r=await a.get("account/getinfo",{headers:{Authorization:"".concat(t)}});if(!r.data)return{data:null};return{data:r.data}}catch(t){return{data:null}}}async createEvent(t){try{return{data:(await a.post("events/create",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error creating event:",t),{error:"Failed to create event"}}}async saveTags(t){console.log(t);try{return{data:(await a.post("account/tags",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error creating event:",t),{error:"Failed to create event"}}}async getEventsCount(){try{let t=localStorage.getItem("custom-auth-token");console.log("token = "+t);let r=await a.get("events/count",{headers:{Authorization:"".concat(t)}});if(!r.data)return{data:null};return{data:r.data}}catch(t){return{data:null}}}async getMyEvent(){try{return console.log(localStorage.getItem("custom-auth-token")),{data:(await a.post("events/getall",null,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error fetching event:",t),{error:"Failed to fetch event"}}}async deleteEvent(t){try{return{data:(await a.post("events/delete",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error deleting events:",t),{error:"Failed to delete events"}}}async uploadAvatar(t){let r=new FormData;r.append("file",t),console.log("formData");try{let[t,e]=(await a.post("account/savefile",r,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data;return{url:e}}catch(t){return{error:"Error uploading avatar"}}}async getCalendar(){try{return{data:(await a.get("calendar/get",{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return{error:"Error signing out"}}}async signOut(){try{return await a.get("account/logout",{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),document.cookie="custom-auth-token=; path=/; max-age=0;",{}}catch(t){return{error:"Error signing out"}}}async callback(){try{console.log("callback");let t=new URLSearchParams(window.location.search).get("code");return await n.get("/callback",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))},params:{code:t}}),{}}catch(t){return console.error("Error occurred:",t),{error:"Error during the start of monitoring"}}}async hhStatus(){try{return(await n.get("monitoring/status",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}})).data}catch(t){return console.error("Error occurred:",t),!1}}async hhStart(){try{let t=await n.get("monitoring/start",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}});if(202===t.status){let r=t.data;r&&(window.location.href=r)}return{error:t.data||"No data from server"}}catch(t){return console.error("Error occurred:",t),{error:"Error during the start of monitoring"}}}async hhStop(){try{return await n.get("monitoring/stop",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}}),document.cookie="custom-auth-token=; path=/; max-age=0;",{}}catch(t){return{error:"Error signing out"}}}async signUpToken(t){try{let r=await a.post("auth/confirm",{check_token:t},{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:e}=r.data,{token_name:o}=r.data;return console.log(o,e),e&&o&&localStorage.setItem(o,e),{}}catch(t){if(o.Z.isAxiosError(t)){var r;return{error:(null===(r=t.response)||void 0===r?void 0:r.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async subscribe(t){try{console.log("eventId = "+t);let r=await a.post("events/subscribe",{eventId:t},{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:e}=r.data,{token_name:o}=r.data;return console.log(o,e),e&&o&&localStorage.setItem(o,e),{}}catch(t){if(o.Z.isAxiosError(t)){var r;return{error:(null===(r=t.response)||void 0===r?void 0:r.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}}let s=new c},4382:function(t,r,e){e.d(r,{k:function(){return a}});var o=e(3141);let a=(0,e(8473).hu)({level:o.v.logLevel})},8473:function(t,r,e){e.d(r,{hu:function(){return c},in:function(){return o}});let o={NONE:"NONE",ERROR:"ERROR",WARN:"WARN",DEBUG:"DEBUG",ALL:"ALL"},a={NONE:0,ERROR:1,WARN:2,DEBUG:3,ALL:4};class n{canWrite(t){return this.levelNumber>=a[t]}write(t){for(var r=arguments.length,e=Array(r>1?r-1:0),a=1;a<r;a++)e[a-1]=arguments[a];let n=this.prefix;this.showLevel&&(n="- ".concat(t," ").concat(n)),t===o.ERROR?console.error(n,...e):console.log(n,...e)}constructor({prefix:t="",level:r=o.ALL,showLevel:e=!0}){var n=this;this.debug=function(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];n.canWrite(o.DEBUG)&&n.write(o.DEBUG,...r)},this.warn=function(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];n.canWrite(o.WARN)&&n.write(o.WARN,...r)},this.error=function(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];n.canWrite(o.ERROR)&&n.write(o.ERROR,...r)},this.prefix=t,this.level=r,this.levelNumber=a[this.level],this.showLevel=e}}function c(){let{prefix:t,level:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({prefix:t,level:r})}},5240:function(t,r,e){e.d(r,{H:function(){return o}});let o={home:"/",auth:{signIn:"/auth/sign-in",signUp:"/auth/sign-up",resetPassword:"/auth/reset-password",confirm:"/auth/confirm",hhcallback:"/auth/callback",subscribe:"/auth/subscribe"},dashboard:{overview:"/dashboard",account:"/dashboard/account",customers:"/dashboard/customers",settings:"/dashboard/settings"},errors:{notFound:"/errors/not-found"}}}}]);