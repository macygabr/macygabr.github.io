(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5803:function(t,e,r){Promise.resolve().then(r.bind(r,1789))},1789:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return u}});var o=r(7437),a=r(2265),n=r(2834),c=r(3814),s=r(3141);function u(){let[t,e]=a.useState(null),[r,u]=a.useState(!0);return a.useEffect(()=>{document.title="Events | Dashboard | ".concat(s.v.site.name)},[]),a.useEffect(()=>{(async()=>{try{let{data:t,error:r}=await c.U.getCalendar();if(r){console.error(r);return}console.log(t),e(t)}catch(t){console.error("Ошибка получения календарей:",t)}finally{u(!1)}})()},[]),(0,o.jsx)(n.Z,{container:!0,direction:"column",alignItems:"center",spacing:2,children:(0,o.jsx)("iframe",{src:(()=>{let e="https://calendar.google.com/calendar/u/0/embed?wkst=1&ctz=Asia/Novosibirsk&mode=WEEK&showTitle=0&showPrint=0&showTz=0&bgcolor=%233F51B5";if(t){let r=t.map(t=>"&src=".concat(t)).join("");return"".concat(e).concat(r)}return e})(),style:{width:"100%",maxWidth:"100%",height:"600pt",maxHeight:"100%"},frameBorder:"0",scrolling:"no"})})}},3141:function(t,e,r){"use strict";let o;r.d(e,{v:function(){return l}});var a,n,c,s=r(357),u=r(8473),i=r(357);let l={site:{name:"Krona События",description:"",themeColor:"#090a0b",url:o=(o=(o=null!==(n=null!==(a=s.env.NEXT_PUBLIC_SITE_URL)&&void 0!==a?a:s.env.NEXT_PUBLIC_VERCEL_URL)&&void 0!==n?n:"http://localhost:3000/").includes("http")?o:"https://".concat(o)).endsWith("/")?o:"".concat(o,"/")},logLevel:null!==(c=i.env.NEXT_PUBLIC_LOG_LEVEL)&&void 0!==c?c:u.in.ALL}},3814:function(t,e,r){"use strict";r.d(e,{U:function(){return s}});var o=r(8472);let a=o.Z.create({baseURL:"http://37.194.168.90:2100"}),n=o.Z.create({baseURL:"http://37.194.168.90:2000"});a.interceptors.request.use(t=>(console.log("Starting Request: ",t),t));class c{async signUp(t){let{email:e,password:r,firstName:n,lastName:c}=t;try{return await a.post("auth/signup",{email:e,password:r,firstName:n,lastName:c,headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{}}catch(t){if(o.Z.isAxiosError(t)){var s;return{error:(null===(s=t.response)||void 0===s?void 0:s.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async signInWithOAuth(t){return{error:"Social authentication not implemented"}}async signInWithPassword(t){let{email:e,password:r}=t;try{let t=await a.post("auth/signin",{email:e,password:r,headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:o}=t.data,{token_name:n}=t.data;return console.log(n,o),o&&n&&localStorage.setItem(n,o),{}}catch(t){if(o.Z.isAxiosError(t)){var n;return{error:(null===(n=t.response)||void 0===n?void 0:n.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async resetPassword(t){return{error:"Password reset not implemented"}}async updatePassword(t){return{error:"Update reset not implemented"}}async getUser(){try{let t=localStorage.getItem("custom-auth-token");console.log("token = "+t);let e=await a.get("account/getinfo",{headers:{Authorization:"".concat(t)}});if(!e.data)return{data:null};return{data:e.data}}catch(t){return{data:null}}}async createEvent(t){try{return{data:(await a.post("events/create",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error creating event:",t),{error:"Failed to create event"}}}async saveTags(t){console.log(t);try{return{data:(await a.post("account/tags",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error creating event:",t),{error:"Failed to create event"}}}async getEventsCount(){try{let t=localStorage.getItem("custom-auth-token");console.log("token = "+t);let e=await a.get("events/count",{headers:{Authorization:"".concat(t)}});if(!e.data)return{data:null};return{data:e.data}}catch(t){return{data:null}}}async getMyEvent(){try{return console.log(localStorage.getItem("custom-auth-token")),{data:(await a.post("events/getall",null,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error fetching event:",t),{error:"Failed to fetch event"}}}async deleteEvent(t){try{return{data:(await a.post("events/delete",t,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return console.error("Error deleting events:",t),{error:"Failed to delete events"}}}async uploadAvatar(t){let e=new FormData;e.append("file",t),console.log("formData");try{let[t,r]=(await a.post("account/savefile",e,{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data;return{url:r}}catch(t){return{error:"Error uploading avatar"}}}async getCalendar(){try{return{data:(await a.get("calendar/get",{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}})).data}}catch(t){return{error:"Error signing out"}}}async signOut(){try{return await a.get("account/logout",{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),document.cookie="custom-auth-token=; path=/; max-age=0;",{}}catch(t){return{error:"Error signing out"}}}async callback(){try{console.log("callback");let t=new URLSearchParams(window.location.search).get("code");return await n.get("/callback",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))},params:{code:t}}),{}}catch(t){return console.error("Error occurred:",t),{error:"Error during the start of monitoring"}}}async hhStatus(){try{return(await n.get("monitoring/status",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}})).data}catch(t){return console.error("Error occurred:",t),!1}}async hhStart(){try{let t=await n.get("monitoring/start",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}});if(202===t.status){let e=t.data;e&&(window.location.href=e)}return{error:t.data||"No data from server"}}catch(t){return console.error("Error occurred:",t),{error:"Error during the start of monitoring"}}}async hhStop(){try{return await n.get("monitoring/stop",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("custom-auth-token"))}}),document.cookie="custom-auth-token=; path=/; max-age=0;",{}}catch(t){return{error:"Error signing out"}}}async signUpToken(t){try{let e=await a.post("auth/confirm",{check_token:t},{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:r}=e.data,{token_name:o}=e.data;return console.log(o,r),r&&o&&localStorage.setItem(o,r),{}}catch(t){if(o.Z.isAxiosError(t)){var e;return{error:(null===(e=t.response)||void 0===e?void 0:e.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}async subscribe(t){try{console.log("eventId = "+t);let e=await a.post("events/subscribe",{eventId:t},{headers:{Authorization:"".concat(localStorage.getItem("custom-auth-token"))}}),{token:r}=e.data,{token_name:o}=e.data;return console.log(o,r),r&&o&&localStorage.setItem(o,r),{}}catch(t){if(o.Z.isAxiosError(t)){var e;return{error:(null===(e=t.response)||void 0===e?void 0:e.data)||"An error occurred"}}return{error:"An unknown error occurred"}}}}let s=new c},8473:function(t,e,r){"use strict";r.d(e,{hu:function(){return c},in:function(){return o}});let o={NONE:"NONE",ERROR:"ERROR",WARN:"WARN",DEBUG:"DEBUG",ALL:"ALL"},a={NONE:0,ERROR:1,WARN:2,DEBUG:3,ALL:4};class n{canWrite(t){return this.levelNumber>=a[t]}write(t){for(var e=arguments.length,r=Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];let n=this.prefix;this.showLevel&&(n="- ".concat(t," ").concat(n)),t===o.ERROR?console.error(n,...r):console.log(n,...r)}constructor({prefix:t="",level:e=o.ALL,showLevel:r=!0}){var n=this;this.debug=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.canWrite(o.DEBUG)&&n.write(o.DEBUG,...e)},this.warn=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.canWrite(o.WARN)&&n.write(o.WARN,...e)},this.error=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];n.canWrite(o.ERROR)&&n.write(o.ERROR,...e)},this.prefix=t,this.level=e,this.levelNumber=a[this.level],this.showLevel=r}}function c(){let{prefix:t,level:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({prefix:t,level:e})}}},function(t){t.O(0,[342,919,472,834,971,23,744],function(){return t(t.s=5803)}),_N_E=t.O()}]);